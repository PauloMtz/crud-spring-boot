<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.w3.org/1999/xhtml"
	layout:decorate="~{_layout}">
<body>
	<div class="layout-main" layout:fragment="corpo">
	
	    <aside th:replace="fragments/aside :: aside"></aside>
	
	    <section class="layout-content">
	
	        <nav class="navbar navbar-expand-md bg-light">
	            <div class="collapse navbar-collapse" id="navbarsExampleDefault">
	                <ul class="navbar-nav mr-auto">
	                    <li class="nav-item active">
	                        <i class="oi oi-caret-right"></i>
	                        <span>Lista de Funcionários</span>
	                    </li>
	                </ul>
	            </div>
	        </nav>
			
			<div class="container">
				<div class="table-responsive">
					<div th:replace="fragments/alerta"></div>

					<table class="table table-striped table-hover table-sm">
						<thead>
						<tr>
							<th>#</th>
							<th>Nome</th>
							<th>Salário</th>
							<th>Departamento</th>
							<th>Cargo</th>
							<th>Endereço</th>
							<th>Data de Entrada</th>
							<th>Data de Saída</th>
							<th>Ação</th>
						</tr>
						</thead>
						<tbody>
							<tr th:each="f : ${funcionarios}">
								<td th:text="${f.id}"></td>
								<td th:text="${f.nome}"></td>
								<td th:text="|R$ ${{f.salario}}|"></td>
								<td th:text="${f.cargo.departamento.nome}"></td>
								<td th:text="${f.cargo.nome}"></td>
								<td>
									<button type="button" class="btn btn-secondary btn-sm" 
										data-container="body"
										data-toggle="popover" data-placement="top"
										th:attr="data-content=${#strings.concat(
											f.endereco.logradouro, ', ', 
											f.endereco.numero, ' ', 
											f.endereco.complemento, ' - ', 
											f.endereco.bairro, ', ',
											f.endereco.cidade, ' - ', 
											f.endereco.uf.sigla, ' - ',
											f.endereco.cep
										)}">
											
										<span class="oi oi-eye" title="Visualizar" 
											aria-hidden="true"></span>
									</button>
								</td>
								<td th:text="${#temporals.format(f.dataEntrada, 'dd/MM/yyyy')}"></td>
								<td th:text="${#temporals.format(f.dataSaida, 'dd/MM/yyyy')}"></td>
								<td colspan="2">
									<a class="btn btn-info btn-sm" role="button"
										th:href="@{/funcionarios/{id}/editar (id=${f.id})}">
										<span class="oi oi-brush" title="Editar" 
											aria-hidden="true"></span>
									</a>
									<a class="btn btn-danger btn-sm"
										th:href="@{/funcionarios/{id}/excluir (id=${f.id})}"
										onclick="return confirm('Deseja realmente excluir esse registro?')">
										<span class="oi oi-circle-x" title="Excluir" aria-hidden="true"></span>
									</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
	    </section>
	</div>
</body>
</html>	